{% extends "base2.html" %}

{% block content %}


<body>
    <!--Page header-->
    <div class="page-header">
        <div class="page-leftheader">
            <h4 class="page-title">Owner Balance Management</h4>
        </div>
        <div class="page-rightheader ml-auto d-lg-flex d-none">
            <div class="ml-5 mb-0">
                <a class="btn btn-white date-range-btn" href="#" id="daterange-btn">
                    <svg class="header-icon2 mr-3" x="1008" y="1248" viewBox="0 0 24 24"  height="100%" width="100%" preserveAspectRatio="xMidYMid meet" focusable="false">
                        <path d="M5 8h14V6H5z" opacity=".3"/><path d="M7 11h2v2H7zm12-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V10h14v10zm0-12H5V6h14v2zm-4 3h2v2h-2zm-4 0h2v2h-2z"/>
                    </svg> <span>Select Date
                    <i class="fa fa-caret-down"></i></span>
                </a>
            </div>
        </div>
    </div>
    <!--End Page header-->
    

    <div class="card">
        <div class="card-header">
            <div class="card-title">Owners Balance</div>
        </div>
        <div class="card-body">
            <div class="">
                <div class="table-responsive">
                    <table id="example" class="table table-bordered text-nowrap key-buttons">
                        <thead>
                            <tr>
                                
                                <th class="border-bottom-0">Owner</th>
                                <th class="border-bottom-0">Floor</th>
                                <th class="border-bottom-0">Room Number</th>
                                <th class="border-bottom-0">Month Paid</th>
                                <th class="border-bottom-0">Due Months</th>
                                <th class="border-bottom-0">Balance</th>
                                
                            </tr>
                        </thead>
                        <tbody>
            {% for data in payment_data %}
            <tr>
                <td>{{ data.owner.name }}</td>
                <td>{{ data.floor.name }}</td>
                <td>{{ data.room_number.room_number }}</td>
                <td>{{ data.month_paid }}</td>
                <td>{{ data.due_months }}</td>
                <td>{{ data.balance }}</td>
            </tr>
            {% endfor %}
                            
                            
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

<head>
    <title>Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <h1>Dashboard</h1>
    <h2>Total Amount This Month: {{ amount_this_month }}</h2>
    <canvas id="myChart" width="400" height="200"></canvas>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            var ctx = document.getElementById('myChart').getContext('2d');
            var graph = {{ graph|safe }};
            var labels = graph.map(item => item.Month);
            var data = graph.map(item => item['Total Amount']);

            var chart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Total Amount per Month',
                        data: data,
                        borderColor: 'rgba(75, 192, 192, 1)',
                        borderWidth: 1,
                        fill: false
                    }]
                },
                options: {
                    scales: {
                        x: {
                            beginAtZero: true
                        },
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        });
    </script>
</body>
   
</body>
</html>



{% endblock %}
